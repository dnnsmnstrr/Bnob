/**
 * This example turns the ESP32 into a Bluetooth LE keyboard that writes the words, presses Enter, presses a media key and then Ctrl+Alt+Delete
 */
#include <Arduino.h>
#include <BleKeyboard.h>

BleKeyboard bleKeyboard;

#define BUTTON_PIN 5
#define LED 2
#define TOUCH_PIN 4 //FÃ¼r Touch: 2, 4, 12, 13, 14, 15, 27
#define MESSAGE "Hello from ESP32\n"

int touch_value = 100;

void setup() {
  Serial.begin(115200);
  Serial.println("Starting BLE work!");
  // configure pin for button
  pinMode(BUTTON_PIN, INPUT_PULLUP);
  bleKeyboard.begin();
}

void loop() {
  delay(500);
  digitalWrite(LED,HIGH);
  delay(500);
  digitalWrite(LED,LOW);
  if(bleKeyboard.isConnected()) {
    if (digitalRead(BUTTON_PIN) == LOW) {
        // button has been pressed: type message
        Serial.println(MESSAGE);
        bleKeyboard.print(MESSAGE);
    }
    touch_value = touchRead(TOUCH_PIN);
    if (touch_value < 50) {
      digitalWrite (LED, HIGH);
    }
    else {
      digitalWrite (LED, LOW);
    }
    // Serial.println("Sending 'Hello world'...");
    // bleKeyboard.print("Hello world");
    //
    // delay(1000);
    //
    // Serial.println("Sending Enter key...");
    // bleKeyboard.write(KEY_RETURN);
    //
    // delay(1000);
    //
    // Serial.println("Sending Play/Pause media key...");
    // bleKeyboard.write(KEY_MEDIA_PLAY_PAUSE);
    //
    // delay(1000);
    //
    // Serial.println("Sending Ctrl+Alt+Delete...");
    // bleKeyboard.press(KEY_LEFT_CTRL);
    // bleKeyboard.press(KEY_LEFT_ALT);
    // bleKeyboard.press(KEY_DELETE);
    // delay(100);
    // bleKeyboard.releaseAll();
  }

  Serial.println("Waiting 5 seconds...");
  delay(5000);
}
